{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\31505\\\\Desktop\\\\MemomusicFront1111-main\\\\src\\\\pages\\\\VAcanvas.jsx\";\nimport React, { Component } from \"react\";\nimport \"../css/common.css\";\nimport VAbg from '../imgs/va model.png';\nimport RDot from '../imgs/red-dot.png';\nimport BDot from '../imgs/blue-dot.png';\nimport { Button } from 'react-bootstrap';\nimport \"../css/va.css\";\n\nclass VAcanvas extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateField = ({\n      target\n    }) => {\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.selectRate = e => {\n      this.setState({\n        rate: e.target.value\n      });\n      this.setState({\n        rateNotFilled: false\n      });\n    };\n\n    this.selectFam = e => {\n      this.setState({\n        fam: e.target.value\n      });\n      this.setState({\n        famNotFilled: false\n      });\n    };\n\n    this.onMouseMove = e => {\n      var x = e.nativeEvent.offsetX + e.nativeEvent.offsetX % parseInt(this.state.imgWidth / 20) - (e.nativeEvent.offsetX + e.nativeEvent.offsetX % parseInt(this.state.imgWidth / 20)) % parseInt(this.state.imgWidth / 10) - 10;\n      var y = e.nativeEvent.offsetY + e.nativeEvent.offsetY % parseInt(this.state.imgHeight / 20) - (e.nativeEvent.offsetY + e.nativeEvent.offsetY % parseInt(this.state.imgHeight / 20)) % parseInt(this.state.imgHeight / 10) - 10;\n      this.setState({\n        x1: x,\n        y1: y\n      }); //console.log(x, y);\n      //this.setState({x1: x, y1: y });\n\n      this.setState({\n        val1x: parseInt(x / (this.state.imgWidth / 11)) - 5,\n        val1y: 10 - parseInt(0.2 + y / (this.state.imgHeight / 11))\n      });\n\n      if (Math.abs(parseInt(x / (this.state.imgWidth / 11)) - 5) <= 5 && Math.abs(10 - parseInt(0.2 + y / (this.state.imgHeight / 11)) - 5) <= 5) {\n        this.setState({\n          rdotdisplay: \"\"\n        });\n      } else {\n        this.setState({\n          rdotdisplay: \"none\"\n        });\n      }\n    };\n\n    this.handleButtonClick = () => {\n      //console.log(\"handleButtonClick\");\n      if (this.state.val1x < -5 || this.state.val1x > 5 || this.state.val1y < 0 || this.state.val1x > 10) {\n        this.setState({\n          canvasNotFilled: true\n        });\n        this.setState({\n          color: \"#dd0000\"\n        });\n      }\n\n      if (this.props.step > 1 && this.state.rate === 0) {\n        this.setState({\n          rateNotFilled: true\n        });\n      }\n\n      if (this.state.val1x >= -5 && this.state.val1x <= 5 && this.state.val1y >= 0 && this.state.val1y <= 10 && (this.props.step === 1 || this.state.rate !== 0)) {\n        //console.log(this.state.val1x + this.state.val1x);\n        this.props.processVA(this.state.y1, this.state.x1, this.state.val1x, this.state.val1y, this.state.rate, this.state.fam);\n      }\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      x1: 0,\n      y1: 0,\n      val1x: -50,\n      val1y: -50,\n      imgHeight: 800,\n      imgWidth: 800,\n      rdotdisplay: \"none\",\n      color: \"#666666\",\n      rate: 0,\n      fam: 0,\n      favorite: 0,\n      overallRate: 0,\n      canvasNotFilled: false,\n      rateNotFilled: false,\n      famNotFilled: false\n    };\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n  }\n\n  componentDidMount() {\n    var w = this.props.width; //console.log(\"w: \" + w);\n\n    if (w < 800) {\n      this.setState({\n        imgHeight: w,\n        imgWidth: w\n      });\n    }\n\n    window.addEventListener('resize', this.updateWindowDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions);\n  }\n\n  updateWindowDimensions() {\n    var w = this.props.width;\n\n    if (w < 800) {\n      this.setState({\n        imgHeight: w,\n        imgWidth: w\n      });\n    } else {\n      this.setState({\n        imgHeight: 800,\n        imgWidth: 800\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: VAbg,\n      onClick: this.onMouseMove.bind(this),\n      width: this.state.imgWidth,\n      height: this.state.imgHeight,\n      alt: \"Valence-arousal background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }), Math.abs(this.state.val1x) <= 5 && Math.abs(this.state.val1y - 5) <= 5 && /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"hint\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, \"\\u60A8\\u5F53\\u524D\\u7684Valence(\\u6109\\u60A6\\u5EA6)\\u503C\\u4E3A\\uFF1A\", this.state.val1x, \"\\uFF0C Arousal(\\u5174\\u594B\\u5EA6)\\u503C\\u4E3A\\uFF1A\", this.state.val1y), (Math.abs(this.state.val1x) > 5 || Math.abs(this.state.val1y - 5) > 5) && /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"hint hintsm\",\n      style: {\n        color: this.state.color\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, \"***请用鼠标点击面板输入一个有效值***\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: BDot,\n      style: {\n        position: 'absolute',\n        top: this.props.top + 'px',\n        left: this.props.left + 'px',\n        display: this.props.display\n      },\n      width: 20,\n      height: 20,\n      alt: \"red dot\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: RDot,\n      style: {\n        position: 'absolute',\n        top: this.state.y1 + 'px',\n        left: this.state.x1 + 'px',\n        display: this.state.rdotdisplay\n      },\n      width: 20,\n      height: 20,\n      alt: \"blue dot\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }), this.props.step <= 9 && this.props.step > 1 && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, !this.state.rateNotFilled && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hint hintsm\",\n      style: {\n        marginBottom: \"0px\",\n        paddingBottom: \"0px\",\n        display: \"inline\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }, \"\\u8BF7\\u4E3A\\u8FD9\\u6BB5\\u97F3\\u4E50\\u7684\\u63A8\\u8350\\u8BC4\\u5206\\uFF1A\"), this.state.rateNotFilled && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hint hintsm\",\n      style: {\n        marginBottom: \"0px\",\n        paddingBottom: \"0px\",\n        display: \"inline\",\n        color: \"#dd0000\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"\\u8BF7\\u4E3A\\u8FD9\\u6BB5\\u97F3\\u4E50\\u7684\\u63A8\\u8350\\u8BC4\\u5206\\uFF1A\"), /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.rate,\n      onChange: this.selectRate,\n      style: {\n        display: \"inline\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \" \\u975E\\u5E38\\u6EE1\\u610F\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, \" \\u6BD4\\u8F83\\u6EE1\\u610F\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, \" \\u4E00\\u822C\\u822C\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, \" \\u6709\\u70B9\\u5931\\u671B\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, \" \\u5F88\\u5931\\u671B\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }), !this.state.rateNotFilled && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hint hintsm\",\n      style: {\n        marginBottom: \"0px\",\n        paddingBottom: \"0px\",\n        display: \"inline\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, \"\\u8BF7\\u9009\\u62E9\\u60A8\\u5BF9\\u8FD9\\u6BB5\\u97F3\\u4E50\\u7684\\u719F\\u6089\\u7A0B\\u5EA6\\uFF1A\"), this.state.rateNotFilled && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hint hintsm\",\n      style: {\n        marginBottom: \"0px\",\n        paddingBottom: \"0px\",\n        display: \"inline\",\n        color: \"#dd0000\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"\\u8BF7\\u9009\\u62E9\\u60A8\\u5BF9\\u8FD9\\u6BB5\\u97F3\\u4E50\\u7684\\u719F\\u6089\\u7A0B\\u5EA6\\uFF1A\"), /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.fam,\n      onChange: this.selectFam,\n      style: {\n        display: \"inline\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, \" \\u719F\\u6089\\u4E14\\u559C\\u6B22\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    }, \" \\u975E\\u5E38\\u719F\\u6089\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, \" \\u6BD4\\u8F83\\u719F\\u6089\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }, \" \\u53EF\\u80FD\\u542C\\u8FC7\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, \" \\u4E0D\\u719F\\u6089\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"hint hintsm\",\n      style: {\n        color: \"#dd5500\",\n        fontWeight: \"bolder\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, \"\\u5F53\\u4E0B\\u7684\\u60C5\\u7EEA\\u8F93\\u5165\\u4E0D\\u4F1A\\u5F71\\u54CD\\u672C\\u8F6E\\u7684\\u97F3\\u4E50\\u63A8\\u8350\\u3002\")), this.props.step <= 9 && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"testButtonDisplay\",\n      onClick: () => this.handleButtonClick(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, \"\\u7EE7\\u7EED\\u5B9E\\u9A8C\"))));\n  }\n\n}\n\nexport default VAcanvas;","map":{"version":3,"sources":["C:/Users/31505/Desktop/MemomusicFront1111-main/src/pages/VAcanvas.jsx"],"names":["React","Component","VAbg","RDot","BDot","Button","VAcanvas","constructor","props","updateField","target","name","value","setState","selectRate","e","rate","rateNotFilled","selectFam","fam","famNotFilled","onMouseMove","x","nativeEvent","offsetX","parseInt","state","imgWidth","y","offsetY","imgHeight","x1","y1","val1x","val1y","Math","abs","rdotdisplay","handleButtonClick","canvasNotFilled","color","step","processVA","email","password","favorite","overallRate","updateWindowDimensions","bind","componentDidMount","w","width","window","addEventListener","componentWillUnmount","removeEventListener","render","position","top","left","display","marginBottom","paddingBottom","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../css/common.css\";\r\nimport VAbg from '../imgs/va model.png';\r\nimport RDot from '../imgs/red-dot.png';\r\nimport BDot from '../imgs/blue-dot.png';\r\nimport {Button} from 'react-bootstrap';\r\nimport \"../css/va.css\";\r\n\r\nclass VAcanvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      x1: 0,\r\n      y1: 0,\r\n      val1x: -50,\r\n      val1y: -50,\r\n      imgHeight: 800,\r\n      imgWidth: 800,\r\n      rdotdisplay: \"none\",\r\n      color: \"#666666\",\r\n      rate: 0,\r\n      fam: 0,\r\n      favorite: 0,\r\n      overallRate: 0,\r\n      canvasNotFilled: false,\r\n      rateNotFilled: false,\r\n      famNotFilled: false,\r\n    };\r\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    var w = this.props.width;\r\n    //console.log(\"w: \" + w);\r\n    if (w < 800) {\r\n      this.setState({imgHeight: w, imgWidth: w});\r\n    }\r\n    window.addEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  updateWindowDimensions() {\r\n    var w = this.props.width;\r\n    if (w < 800){\r\n      this.setState({imgHeight: w, imgWidth: w});\r\n    }\r\n    else{\r\n      this.setState({imgHeight: 800, imgWidth: 800});\r\n    }\r\n  }\r\n\r\n  updateField = ({ target }) => {\r\n    const { name, value } = target;\r\n\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  selectRate = (e) => {\r\n    this.setState({rate: e.target.value});\r\n    this.setState({rateNotFilled: false});\r\n  }\r\n\r\n  selectFam = (e) => {\r\n    this.setState({fam: e.target.value});\r\n    this.setState({famNotFilled: false});\r\n  }\r\n\r\n  onMouseMove = (e) => {\r\n    var x = e.nativeEvent.offsetX + e.nativeEvent.offsetX % parseInt(this.state.imgWidth / 20) - (e.nativeEvent.offsetX + e.nativeEvent.offsetX % parseInt(this.state.imgWidth / 20)) % parseInt(this.state.imgWidth / 10) - 10;\r\n    var y = e.nativeEvent.offsetY + e.nativeEvent.offsetY % parseInt(this.state.imgHeight / 20) - (e.nativeEvent.offsetY + e.nativeEvent.offsetY % parseInt(this.state.imgHeight / 20)) % parseInt(this.state.imgHeight / 10) -10;\r\n    this.setState({ x1: x, y1: y });\r\n    //console.log(x, y);\r\n    //this.setState({x1: x, y1: y });\r\n    this.setState({ val1x: parseInt(x / (this.state.imgWidth / 11)) - 5, val1y: 10 - parseInt(0.2 + y / (this.state.imgHeight / 11))});\r\n    if (Math.abs(parseInt((x) / (this.state.imgWidth / 11)) - 5) <= 5 && Math.abs(10 - parseInt(0.2 + y / (this.state.imgHeight / 11)) - 5) <= 5) {\r\n      this.setState({ rdotdisplay: \"\" });\r\n    } else {\r\n      this.setState({ rdotdisplay: \"none\" });\r\n    }\r\n  }\r\n\r\n  handleButtonClick = () => {\r\n    //console.log(\"handleButtonClick\");\r\n    if (this.state.val1x < -5 || this.state.val1x > 5 || this.state.val1y < 0 || this.state.val1x > 10) {\r\n      this.setState({canvasNotFilled: true});\r\n      this.setState({color: \"#dd0000\"});\r\n    }\r\n    if (this.props.step > 1 && this.state.rate === 0) {\r\n      this.setState({rateNotFilled: true});\r\n    }\r\n    if ((this.state.val1x >= -5 && this.state.val1x <= 5 && this.state.val1y >= 0 && this.state.val1y <= 10) && (this.props.step === 1 || this.state.rate !== 0)) {\r\n      //console.log(this.state.val1x + this.state.val1x);\r\n      this.props.processVA(this.state.y1, this.state.x1, this.state.val1x, this.state.val1y, this.state.rate, this.state.fam);\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div style={{ position: 'relative' }}>\r\n        <img src={VAbg} onClick={this.onMouseMove.bind(this)} width={this.state.imgWidth} height={this.state.imgHeight} alt=\"Valence-arousal background\"/>\r\n        {(Math.abs(this.state.val1x) <= 5 && Math.abs(this.state.val1y - 5) <= 5) &&\r\n          <h1 className=\"hint\">您当前的Valence(愉悦度)值为：{ this.state.val1x }， Arousal(兴奋度)值为：{ this.state.val1y }</h1>\r\n        }\r\n        {(Math.abs(this.state.val1x) > 5 || Math.abs(this.state.val1y - 5) > 5) &&\r\n          <h1 className=\"hint hintsm\" style={{color: this.state.color}}>{\"***请用鼠标点击面板输入一个有效值***\"}</h1>\r\n        }\r\n        <img src={BDot} style={{ position: 'absolute', top: this.props.top + 'px', left: this.props.left + 'px', display: this.props.display }} width={20} height={20} alt=\"red dot\"/>\r\n        <img src={RDot} style={{ position: 'absolute', top: this.state.y1 + 'px', left: this.state.x1 + 'px', display: this.state.rdotdisplay }} width={20} height={20} alt=\"blue dot\"/>\r\n        {(this.props.step <= 9 && this.props.step > 1) &&\r\n          <div>\r\n            {!this.state.rateNotFilled &&\r\n              <p className=\"hint hintsm\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\"}}>请为这段音乐的推荐评分：</p>\r\n            }\r\n            {this.state.rateNotFilled &&\r\n              <p className=\"hint hintsm\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\", color: \"#dd0000\"}}>请为这段音乐的推荐评分：</p>\r\n            }\r\n            <select value={this.state.rate} onChange={this.selectRate} style={{display: \"inline\"}}>\r\n                <option value={5}> 非常满意</option>\r\n                <option value={4}> 比较满意</option>\r\n                <option value={3}> 一般般</option>\r\n                <option value={2}> 有点失望</option>\r\n                <option value={1}> 很失望</option>\r\n            </select>\r\n            <br />\r\n            <br />\r\n            {!this.state.rateNotFilled &&\r\n              <p className=\"hint hintsm\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\"}}>请选择您对这段音乐的熟悉程度：</p>\r\n            }\r\n            {this.state.rateNotFilled &&\r\n              <p className=\"hint hintsm\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\", color: \"#dd0000\"}}>请选择您对这段音乐的熟悉程度：</p>\r\n            }\r\n            <select value={this.state.fam} onChange={this.selectFam} style={{display: \"inline\"}}>\r\n              <option value={5}> 熟悉且喜欢</option>\r\n              <option value={4}> 非常熟悉</option>\r\n              <option value={3}> 比较熟悉</option>\r\n              <option value={2}> 可能听过</option>\r\n              <option value={1}> 不熟悉</option>\r\n              \r\n              \r\n              \r\n              \r\n            </select>\r\n            <br />\r\n            <br />\r\n            <p className=\"hint hintsm\" style={{color: \"#dd5500\", fontWeight: \"bolder\"}}>当下的情绪输入不会影响本轮的音乐推荐。</p>\r\n          </div>\r\n        }\r\n        {this.props.step <= 9 &&\r\n          <div>\r\n            <Button className=\"testButtonDisplay\" onClick={() => this.handleButtonClick()}>继续实验</Button>\r\n          </div>\r\n        }\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VAcanvas;\r\n"]},"metadata":{},"sourceType":"module"}