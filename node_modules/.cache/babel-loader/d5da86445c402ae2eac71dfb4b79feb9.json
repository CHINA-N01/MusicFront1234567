{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\31505\\\\Desktop\\\\MemomusicFront1111-main\\\\src\\\\pages\\\\Home.jsx\";\nimport React, { Component } from \"react\";\nimport Experiment from \"../services/Experiment.js\";\nimport { Link } from 'react-router-dom';\nimport VAcanvas from './VAcanvas.jsx';\nimport MP3 from './MP3.jsx';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Button } from 'react-bootstrap';\nimport \"../css/home.css\";\nimport axios from 'axios';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.startNewExperiment = (v, a) => {\n      //console.log(\"in startNewExperiment\");\n      //console.log(this.props.endDate);\n      Experiment.start(this.props.uId, this.props.expNum, v, a).then(response => {\n        //console.log(response);\n        if (response !== undefined) {\n          this.setState({\n            mid: response.data.mid\n          });\n          const payload = {\n            \"musicIndex\": this.state.mid\n          };\n          var posturl = 'http://101.200.125.86:5001/ClassicalMusic';\n          console.log('home.js utype');\n          console.log(this.props.utype);\n\n          if (this.props.utype == 2) {\n            posturl = 'http://101.200.125.86:5001/PopMusic';\n          }\n\n          if (this.props.utype == 3) {\n            posturl = 'http://101.200.125.86:5001/YanniMusic';\n          }\n\n          axios.post(posturl, payload).then(response => {\n            this.setState({\n              url: response.data.url\n            });\n            console.log(response.data.url);\n            this.setState({\n              step: this.state.step + 1\n            });\n            console.log('###ABC###');\n          });\n        } else {\n          alert(\"User not exist, please register!\");\n        }\n      }).catch(error => console.log(error));\n    };\n\n    this.recordEachMusic = (v, a, rate, fam) => {\n      Experiment.musicUpdate(parseInt(this.props.uId), parseInt(this.props.expNum), this.state.songnum - 1, parseInt(this.state.mid), v, a, parseInt(rate), parseInt(fam)).then(response => {\n        //console.log(response);\n        if (response !== undefined) {\n          this.setState({\n            mid: response.data.mid\n          });\n          const payload = {\n            \"musicIndex\": this.state.mid\n          };\n          var posturl = 'http://101.200.125.86:5001/ClassicalMusic';\n          console.log('home.js utype');\n          console.log(this.props.utype);\n\n          if (this.props.utype == 2) {\n            posturl = 'http://101.200.125.86:5001/PopMusic';\n          }\n\n          if (this.props.utype == 3) {\n            posturl = 'http://101.200.125.86:5001/YanniMusic';\n          }\n\n          axios.post(posturl, payload).then(response => {\n            this.setState({\n              url: response.data.url\n            });\n            console.log(response.data.url);\n            this.setState({\n              step: this.state.step + 1\n            });\n            console.log('###ABC###');\n          });\n        } else {\n          alert(\"Something wrong with musicUpdate, please check!\");\n        }\n      }).catch(error => console.log(error));\n    };\n\n    this.updateField = ({\n      target\n    }) => {\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.processVA = (top, left, v, a, rate, fam) => {\n      //console.log(\"processVA\");\n      if (this.state.step === 1) {\n        this.setState({\n          initop: top,\n          inileft: left,\n          top: top,\n          left: left,\n          v: v,\n          a: a\n        });\n        this.startNewExperiment(v, a);\n      } else {\n        this.setState({\n          top: top,\n          left: left,\n          v: v,\n          a: a,\n          rate: rate,\n          fam: fam\n        }); //console.log(v + \" \" + a + \" \" + rate + \" \" + fam)\n\n        this.recordEachMusic(v, a, rate, fam);\n      }\n    };\n\n    this.selectOverallRate = e => {\n      this.setState({\n        overallRate: e.target.value\n      });\n    };\n\n    this.selectFavoriteSong = e => {\n      this.setState({\n        favorite: e.target.value\n      });\n    };\n\n    this.startTest = () => {\n      this.setState({\n        step: this.state.step + 1\n      });\n    };\n\n    this.endTest = () => {\n      if (this.state.overallRate > 0 && this.state.favorite > 0) {\n        Experiment.expEnd(parseInt(this.props.uId), parseInt(this.props.expNum), this.state.v, this.state.a, parseInt(this.state.favorite), parseInt(this.state.overallRate)).then(response => {//console.log(response);\n        });\n        this.props.handleLogOut();\n      } else {\n        if (this.state.overallRate < 0) {\n          this.setState({\n            overallRate: 0\n          });\n        }\n\n        if (this.state.favorite < 0) {\n          this.setState({\n            favorite: 0\n          });\n        }\n      }\n    };\n\n    this.audioEnd = writingComment => {\n      if (!writingComment) {\n        this.setState({\n          step: this.state.step + 1,\n          songnum: this.state.songnum + 1\n        });\n      }\n    };\n\n    this.state = {\n      val: [],\n      memo: \"\",\n      step: 0,\n      songnum: 1,\n      initop: -50,\n      inileft: -50,\n      top: -50,\n      left: -50,\n      width: 0,\n      height: 0,\n      canvasWidth: 0,\n      songs: [\"第1首\", \"第2首\", \"第3首\", \"第4首\"],\n      favorite: -1,\n      overallRate: -1,\n      v: -10,\n      a: -10,\n      mid: -1,\n      url: \"\",\n      rate: -1,\n      fam: -1,\n      needNewDate: false,\n      newDate: new Date()\n    };\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n  }\n\n  componentDidMount() {\n    this.updateWindowDimensions();\n\n    if (this.props.loggedIn === true && this.props.musicNum > 0) {\n      //console.log(this.props.musicNum);\n      this.setState({\n        left: (5 + this.props.v) * Math.min(800, window.innerWidth) / 10 - 10\n      });\n      this.setState({\n        top: (10 - this.props.a) * Math.min(800, window.innerWidth) / 10 - 10\n      });\n      this.setState({\n        step: (this.props.musicNum + 1) * 2\n      });\n      this.setState({\n        songnum: this.props.musicNum + 1\n      });\n      this.setState({\n        url: this.props.murl\n      });\n      this.setState({\n        mid: this.props.mid\n      }); //console.log(this.props.v * Math.min(800, window.innerWidth) / 10);\n      //console.log(this.props.a * Math.min(800, window.innerWidth) / 10);\n      //console.log((this.props.musicNum + 1) * 2 );\n    } //console.log(this.props.endDate);\n    //console.log(this.props.endDate === null);\n\n\n    this.setState({\n      needNewDate: true\n    });\n    var date = new Date();\n    date.setDate(date.getDate() + 6); //console.log(date);\n\n    this.setState({\n      newDate: date\n    });\n    window.addEventListener('resize', this.updateWindowDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions);\n  }\n\n  updateWindowDimensions() {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight\n    });\n\n    if (window.innerWidth >= 820) {\n      this.setState({\n        canvasWidth: 800\n      }); //console.log(\"window.innerWidth: \" + window.innerWidth + \"  canvasWidth: \" + 800);\n    } else {\n      this.setState({\n        canvasWidth: window.innerWidth - 20\n      }); //console.log(\"window.innerWidth: \" + window.innerWidth + \"  canvasWidth: \" + window.innerWidth);\n    }\n  }\n\n  render() {\n    if (this.props.loggedIn === false) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          \"textAlign\": \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }\n      }, \"\\u8BF7\\u5148\\u767B\\u5F55\\u6216\\u8005\\u6CE8\\u518C\\uFF0C\\u8C22\\u8C22\\uFF01\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/faq\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }\n      }, \"\\u70B9\\u51FB\\u6B64\\u5904\\u9605\\u8BFB\\u5B9E\\u9A8C\\u4ECB\\u7ECD\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 15\n        }\n      }, \"\\u70B9\\u51FB\\u6B64\\u5904\\u767B\\u5F55\\u7F51\\u9875\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/register\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }\n      }, \"\\u70B9\\u51FB\\u6B64\\u5904\\u6CE8\\u518C\\u8D26\\u53F7\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 15\n        }\n      }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\\u6216\\u8005\\u9047\\u5230\\u5176\\u4ED6\\u767B\\u5F55\\u95EE\\u9898\\uFF0C\\u8BF7\\u53CA\\u65F6\\u8054\\u7CFB\\u7BA1\\u7406\\u5458TYH\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 48\n        }\n      }, \"\\u5FAE\\u4FE1\\uFF1Aszxh20190131\")));\n    }\n\n    if (this.state.step === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mainPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"introclass\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }\n      }, \"\\u5B9E\\u9A8C\\u5165\\u53E3\"), this.props.expNum <= 3 && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"intro\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }\n      }, \"\\u672C\\u5B9E\\u9A8C\\u65E8\\u5728\\u6D4B\\u8BD5\\u97F3\\u4E50\\u5BF9\\u4EBA\\u60C5\\u7EEA\\u7684\\u5F71\\u54CD\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 32\n        }\n      }), \"\\u5B9E\\u9A8C\\u5C06\\u5206\\u4E3A\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 20\n        }\n      }, \"3\"), \" \\u8F6E\\u8FDB\\u884C\\uFF0C\", this.state.width >= 600 && /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 42\n        }\n      }), \"\\u6211\\u4EEC\\u5E0C\\u671B\\u60A8\\u5728\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }, \"1\"), \" \\u5929\\u4E4B\\u4E2D\\u5B8C\\u6210\\u4E0D\\u591A\\u4E8E\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 66\n        }\n      }, \"2\"), \" \\u8F6E\\u5B9E\\u9A8C\\uFF0C\", this.state.width >= 600 && /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 134\n        }\n      }), \"\\u8BF7\\u5C3D\\u91CF\\u9009\\u62E9\\u6709\\u4E0D\\u540C\\u60C5\\u7EEA\\u65F6\\u8FDB\\u884C\\u8BD5\\u9A8C\\uFF0C \\u5E76\\u5728\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 17\n        }\n      }, \"3\"), \" \\u5929\\u4E4B\\u5185\\u5B8C\\u6210\\u6240\\u6709\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 61\n        }\n      }, \"3\"), \"\\u8F6E\\u5B9E\\u9A8C\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 101\n        }\n      }), \"\\u6BCF\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 16\n        }\n      }, \"1\"), \" \\u8F6E\\u5B9E\\u9A8C\\u5F00\\u59CB\\u8BF7\\u60A8\\u8F93\\u5165\\u60A8\\u5F53\\u4E0B\\u7684\\u60C5\\u7EEA\\u6570\\u636E\\uFF08\", /*#__PURE__*/React.createElement(Link, {\n        to: \"/faq\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 71\n        }\n      }, \"V-A\\u6A21\\u578B\"), \"\\uFF09\\uFF0C\", this.state.width >= 600 && /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 128\n        }\n      }), \"\\u4E4B\\u540E\\u60A8\\u5C06\\u542C\\u5230\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }\n      }, \"4\"), \" \\u6BB5\\u4E0D\\u540C\\u7684\\u97F3\\u4E50\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 65\n        }\n      }), \"\\u5982\\u679C\\u97F3\\u4E50\\u5524\\u8D77\\u4E86\\u60A8\\u7684\\u90E8\\u5206\\u56DE\\u5FC6\\u6216\\u60C5\\u7EEA\\uFF0C\", this.state.width >= 600 && /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 59\n        }\n      }), \"\\u6211\\u4EEC\\u5E0C\\u671B\\u60A8\\u80FD\\u5728\\u7F51\\u9875\\u63D0\\u4F9B\\u7684\\u8F93\\u5165\\u6846\\u5185\\u7B80\\u6D01\\u76F4\\u767D\\u5730\\u63CF\\u8FF0\\uFF0C\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 39\n        }\n      }), \"\\u8FD9\\u5C06\\u5BF9\\u6211\\u4EEC\\u5B9E\\u9A8C\\u4E2D\\u7814\\u7A76\\u56DE\\u5FC6\\u5982\\u4F55\\u5F71\\u54CD\\u6211\\u4EEC\\u5BF9\\u4E8E\\u97F3\\u4E50\\u7684\\u7406\\u89E3\\u6709\\u6781\\u5927\\u5E2E\\u52A9\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 46\n        }\n      }), \"\\u5728\\u6BCF\\u6BB5\\u97F3\\u4E50\\u7ED3\\u675F\\u4E4B\\u540E\\uFF0C\\u6211\\u4EEC\\u540C\\u6837\\u4F1A\\u4F7F\\u7528V-A\\u6A21\\u578B\\u6765\\u91C7\\u96C6\\u60A8\\u60C5\\u7EEA\\u53D8\\u5316\\u7684\\u6570\\u636E\\uFF0C\", this.state.width >= 600 && /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 76\n        }\n      }), \"\\u4EE5\\u4F9B\\u5B9E\\u9A8C\\u5BF9\\u6BD4\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 22\n        }\n      }), \"\\u8BE5V-A\\u503C\\u5C06\\u5728\\u4E4B\\u540E\\u7528\\u6765\\u8C03\\u6574\\u7B97\\u6CD5\\uFF0C\\u4E0D\\u4F1A\\u5F71\\u54CD\\u672C\\u8F6E\\u97F3\\u4E50\\u63A8\\u8350\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 42\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 47\n        }\n      }), \"\\u8BF7\\u60A8\\u5728\\u5B9E\\u9A8C\\u5F00\\u59CB\\u540E\\u4E0D\\u8981\\u79BB\\u5F00\\u8FD9\\u4E2A\\u9875\\u9762\\u76F4\\u81F3\\u7ED3\\u675F\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 36\n        }\n      }), \"\\u5982\\u9700\\u79BB\\u5F00\\uFF0C\\u8BF7\\u60A8\\u5728\\u8FD4\\u56DE\\u65F6\\u52A1\\u5FC5\\u91CD\\u65B0\\u767B\\u5F55\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 33\n        }\n      }), \"\\u5982\\u679C\\u60A8\\u5728\\u672C\\u8F6E\\u5B9E\\u9A8C\\u5F00\\u59CB\\u540E\\u76843\\u4E2A\\u5C0F\\u65F6\\u5185\\u91CD\\u65B0\\u767B\\u5F55\\uFF0C\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 37\n        }\n      }), \"\\u60A8\\u5C06\\u53EF\\u4EE5\\u7EE7\\u7EED\\u5B9E\\u9A8C\\u4E2D\\u672A\\u5B8C\\u6210\\u7684\\u90E8\\u5206\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 31\n        }\n      }), \"\\u5982\\u679C\\u8D85\\u8FC73\\u4E2A\\u5C0F\\u65F6\\uFF0C \\u5219\\u672C\\u8F6E\\u5B9E\\u9A8C\\u7684\\u8BB0\\u5F55\\u5C06\\u6E05\\u7A7A\\uFF0C\\u60A8\\u9700\\u91CD\\u65B0\\u5F00\\u59CB\\u672C\\u8F6E\\u5B9E\\u9A8C\\u3002\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 38\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }\n      }), \"\\u8FD9\\u662F\\u60A8\\u7684\\u7B2C\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"numOfTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 18\n        }\n      }, this.props.expNum), \"\\u8F6E\\u5B9E\\u9A8C\"), this.props.expNum > 3 && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"intro\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }\n      }, \"\\u60A8\\u5DF2\\u5B8C\\u6210\\u6240\\u6709\\u5B9E\\u9A8C\\uFF0C\\u6211\\u4EEC\\u8877\\u5FC3\\u611F\\u8C22\\u60A8\\u7684\\u652F\\u6301\\u4E0E\\u5E2E\\u52A9\\uFF01\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }\n      }, this.props.expNum <= 3 && /*#__PURE__*/React.createElement(Button, {\n        className: \"testButtonDisplay\",\n        onClick: () => this.startTest(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }\n      }, \"\\u5F00\\u59CB\\u5B9E\\u9A8C\"), this.props.expNum > 3 && /*#__PURE__*/React.createElement(Button, {\n        className: \"testButtonDisplay\",\n        onClick: () => this.props.handleLogOut(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }\n      }, \"\\u9000\\u51FA\\u767B\\u5F55\"))));\n    }\n\n    if (this.state.step === 10) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mainPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"introclass\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }\n      }, \"\\u606D\\u559C\\u60A8\\uFF0C\\u5B8C\\u6210\\u672C\\u8F6E\\u5B9E\\u9A8C\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"hint\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }\n      }, \"\\u5F53\\u524D\\u5B9E\\u9A8C\\u8FDB\\u5EA6\\u4E3A \", this.props.expNum, \" / 3\\uFF0C \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 66\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 72\n        }\n      }), \"\\u8BF7\\u4E8E\", isNaN(this.props.endDate.getMonth()) ? this.state.newDate.getMonth() + 1 : this.props.endDate.getMonth() + 1, \"\\u6708\", isNaN(this.props.endDate.getDate()) ? this.state.newDate.getDate() : this.props.endDate.getDate(), \"\\u65E5\\u4E4B\\u524D\\u5B8C\\u6210\\u5269\\u4F59\\u90E8\\u5206\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"block\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }\n      }, this.state.favorite === 0 && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"hint\",\n        style: {\n          marginBottom: \"0px\",\n          paddingBottom: \"0px\",\n          display: \"inline\",\n          color: \"#dd0000\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 17\n        }\n      }, \"\\u8BF7\\u9009\\u62E9\\u672C\\u8F6E\\u60A8\\u6700\\u6EE1\\u610F\\u7684\\u97F3\\u4E50\\uFF1A\"), this.state.favorite !== 0 && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"hint\",\n        style: {\n          marginBottom: \"0px\",\n          paddingBottom: \"0px\",\n          display: \"inline\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 17\n        }\n      }, \"\\u8BF7\\u9009\\u62E9\\u672C\\u8F6E\\u60A8\\u6700\\u6EE1\\u610F\\u7684\\u97F3\\u4E50\\uFF1A\"), /*#__PURE__*/React.createElement(\"select\", {\n        value: this.state.favorite,\n        onChange: this.selectFavoriteSong,\n        style: {\n          display: \"inline\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 17\n        }\n      }, \" \", this.state.songs[0]), /*#__PURE__*/React.createElement(\"option\", {\n        value: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 17\n        }\n      }, \" \", this.state.songs[1]), /*#__PURE__*/React.createElement(\"option\", {\n        value: 3,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 17\n        }\n      }, \" \", this.state.songs[2]), /*#__PURE__*/React.createElement(\"option\", {\n        value: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 17\n        }\n      }, \" \", this.state.songs[3])), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 15\n        }\n      }), this.state.overallRate === 0 && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"hint\",\n        style: {\n          marginBottom: \"0px\",\n          paddingBottom: \"0px\",\n          display: \"inline\",\n          color: \"#dd0000\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 17\n        }\n      }, \"\\u8BF7\\u4E3A\\u672C\\u8F6E\\u63A8\\u8350\\u7684\\u97F3\\u4E50\\u505A\\u603B\\u8BC4\\u5206\\uFF1A\"), this.state.overallRate !== 0 && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"hint\",\n        style: {\n          marginBottom: \"0px\",\n          paddingBottom: \"0px\",\n          display: \"inline\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 17\n        }\n      }, \"\\u8BF7\\u4E3A\\u672C\\u8F6E\\u63A8\\u8350\\u7684\\u97F3\\u4E50\\u505A\\u603B\\u8BC4\\u5206\\uFF1A\"), /*#__PURE__*/React.createElement(\"select\", {\n        value: this.state.overallRate,\n        onChange: this.selectOverallRate,\n        style: {\n          display: \"inline\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 17\n        }\n      }, \" \\u975E\\u5E38\\u6EE1\\u610F\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 17\n        }\n      }, \" \\u6BD4\\u8F83\\u6EE1\\u610F\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: 3,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 17\n        }\n      }, \" \\u4E00\\u822C\\u822C\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 17\n        }\n      }, \" \\u6709\\u70B9\\u5931\\u671B\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 17\n        }\n      }, \" \\u5F88\\u5931\\u671B\"))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"testButtonDisplay\",\n        onClick: () => this.endTest(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }\n      }, \"\\u5B8C\\u6210\\u5B9E\\u9A8C\\u5E76\\u9000\\u51FA\\u767B\\u5F55\"))));\n    }\n\n    if (this.state.step === 10) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mainPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }\n      }, \"\\u606D\\u559C\\u60A8\\u5DF2\\u5B8C\\u6210\\u672C\\u6B21\\u5B9E\\u9A8C\\u542C\\u97F3\\u4E50\\u7684\\u90E8\\u5206\\uFF0C\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 50\n        }\n      }), \"\\u8BF7\\u5B8C\\u6210\\u4EE5\\u4E0B\\u95EE\\u5377\\u4EE5\\u7ED3\\u675F\\u5B9E\\u9A8C\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"block\",\n          width: this.state.canvasWidth + \"px\",\n          margin: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }\n      })));\n    }\n\n    if (this.state.step === 1) {\n      console.log('11111111111');\n      console.log(this.state.step);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mainPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }\n      }, \"\\u8BF7\\u8F93\\u5165\\u60A8\\u5F53\\u4E0B\\u7684\\u60C5\\u7EEA\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"block\",\n          width: this.state.canvasWidth + \"px\",\n          margin: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(VAcanvas, {\n        width: this.state.canvasWidth,\n        processVA: this.processVA,\n        step: this.state.step,\n        display: \"none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }\n      }))));\n    }\n\n    if (this.state.step !== 0 && this.state.step % 2 === 0) {\n      console.log('2222222222');\n      console.log(this.state.step);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mainPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }\n      }, \"\\u8BF7\\u542C\\u97F3\\u4E50 \", this.state.songnum, \"/ 4\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"block\",\n          width: this.state.canvasWidth + \"px\",\n          margin: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(MP3, {\n        width: this.state.canvasWidth,\n        audioEnd: this.audioEnd,\n        url: this.state.url,\n        expNum: this.props.expNum,\n        songNum: this.state.songnum,\n        uId: this.props.uId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 15\n        }\n      }))));\n    }\n\n    if (this.state.step !== 0 && this.state.step % 2 === 1) {\n      console.log('33333333333');\n      console.log(this.state.step);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mainPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inTest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sTitle stsm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }\n      }, \"\\u8BF7\\u8F93\\u5165\\u60A8\\u5F53\\u4E0B\\u7684\\u60C5\\u7EEA\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"hint itsm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }\n      }, \"(\\u84DD\\u70B9\\u4F5C\\u4E3A\\u53C2\\u8003\\u8868\\u793A\\u4E0A\\u4E00\\u6B21\\u8F93\\u5165\\u7684\\u503C)\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"block\",\n          width: this.state.canvasWidth + \"px\",\n          margin: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(VAcanvas, {\n        width: this.state.canvasWidth,\n        processVA: this.processVA,\n        step: this.state.step,\n        display: \"inherit\",\n        top: this.state.top === -50 ? this.state.initop : this.state.top,\n        left: this.state.left === -50 ? this.state.inileft : this.state.left,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }\n      }))));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/31505/Desktop/MemomusicFront1111-main/src/pages/Home.jsx"],"names":["React","Component","Experiment","Link","VAcanvas","MP3","Button","axios","Home","constructor","props","startNewExperiment","v","a","start","uId","expNum","then","response","undefined","setState","mid","data","payload","state","posturl","console","log","utype","post","url","step","alert","catch","error","recordEachMusic","rate","fam","musicUpdate","parseInt","songnum","updateField","target","name","value","processVA","top","left","initop","inileft","selectOverallRate","e","overallRate","selectFavoriteSong","favorite","startTest","endTest","expEnd","handleLogOut","audioEnd","writingComment","val","memo","width","height","canvasWidth","songs","needNewDate","newDate","Date","updateWindowDimensions","bind","componentDidMount","loggedIn","musicNum","Math","min","window","innerWidth","murl","date","setDate","getDate","addEventListener","componentWillUnmount","removeEventListener","innerHeight","render","isNaN","endDate","getMonth","display","marginBottom","paddingBottom","color","margin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Experiment from \"../services/Experiment.js\";\r\nimport {Link} from 'react-router-dom';\r\nimport VAcanvas from './VAcanvas.jsx';\r\nimport MP3 from './MP3.jsx';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Button} from 'react-bootstrap';\r\nimport \"../css/home.css\";\r\nimport axios from 'axios';\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      val: [],\r\n      memo: \"\",\r\n      step: 0,\r\n      songnum: 1,\r\n      initop: -50,\r\n      inileft: -50,\r\n      top: -50,\r\n      left: -50,\r\n      width: 0,\r\n      height: 0,\r\n      canvasWidth: 0,\r\n      songs: [\"第1首\", \"第2首\", \"第3首\", \"第4首\"],\r\n      favorite: -1,\r\n      overallRate: -1,\r\n      v: -10,\r\n      a: -10,\r\n      mid: -1,\r\n      url: \"\",\r\n      rate: -1,\r\n      fam: -1,\r\n      needNewDate: false,\r\n      newDate: new Date()\r\n    };\r\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateWindowDimensions();\r\n    if (this.props.loggedIn === true && this.props.musicNum > 0) {\r\n      //console.log(this.props.musicNum);\r\n      this.setState({left: (5 + this.props.v) * Math.min(800, window.innerWidth) / 10 - 10});\r\n      this.setState({top: (10 - this.props.a) * Math.min(800, window.innerWidth) / 10 - 10});\r\n      this.setState({step: (this.props.musicNum + 1) * 2});\r\n      this.setState({songnum: this.props.musicNum + 1});\r\n      this.setState({url: this.props.murl});\r\n      this.setState({mid: this.props.mid});\r\n      //console.log(this.props.v * Math.min(800, window.innerWidth) / 10);\r\n      //console.log(this.props.a * Math.min(800, window.innerWidth) / 10);\r\n      //console.log((this.props.musicNum + 1) * 2 );\r\n    }\r\n    //console.log(this.props.endDate);\r\n    //console.log(this.props.endDate === null);\r\n\r\n    this.setState({needNewDate: true});\r\n    var date = new Date();\r\n    date.setDate(date.getDate() + 6);\r\n    //console.log(date);\r\n    this.setState({newDate: date});\r\n    window.addEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  updateWindowDimensions() {\r\n    this.setState({ width: window.innerWidth, height: window.innerHeight });\r\n    if (window.innerWidth >= 820) {\r\n      this.setState({canvasWidth: 800});\r\n      //console.log(\"window.innerWidth: \" + window.innerWidth + \"  canvasWidth: \" + 800);\r\n    }\r\n    else{\r\n      this.setState({canvasWidth: window.innerWidth - 20});\r\n      //console.log(\"window.innerWidth: \" + window.innerWidth + \"  canvasWidth: \" + window.innerWidth);\r\n    }\r\n\r\n  }\r\n\r\n  startNewExperiment = (v, a) => {\r\n    //console.log(\"in startNewExperiment\");\r\n    //console.log(this.props.endDate);\r\n    Experiment.start(this.props.uId, this.props.expNum, v, a)\r\n      .then(response => {\r\n        //console.log(response);\r\n        if (response !== undefined){\r\n          \r\n          this.setState({mid: response.data.mid});\r\n          \r\n          const payload = { \"musicIndex\": this.state.mid };\r\n          var posturl = 'http://101.200.125.86:5001/ClassicalMusic';\r\n          console.log('home.js utype');\r\n          console.log(this.props.utype);\r\n          if(this.props.utype == 2)\r\n          {\r\n             posturl = 'http://101.200.125.86:5001/PopMusic';\r\n          }\r\n          if(this.props.utype == 3)\r\n          {\r\n             posturl = 'http://101.200.125.86:5001/YanniMusic';\r\n          }\r\n          axios.post(posturl, payload)\r\n          .then(response => {\r\n          this.setState({ url: response.data.url});\r\n          console.log(response.data.url);\r\n          this.setState({step: this.state.step + 1});\r\n          console.log('###ABC###'); \r\n    });\r\n        }else{\r\n          alert(\"User not exist, please register!\");\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  };\r\n\r\n  recordEachMusic = (v, a, rate, fam) => {\r\n    Experiment.musicUpdate(parseInt(this.props.uId), parseInt(this.props.expNum), this.state.songnum - 1, parseInt(this.state.mid), v, a, parseInt(rate), parseInt(fam))\r\n      .then(response => {\r\n        //console.log(response);\r\n        if (response !== undefined){\r\n          \r\n          this.setState({mid: response.data.mid});\r\n          \r\n          const payload = { \"musicIndex\": this.state.mid };\r\n          var posturl = 'http://101.200.125.86:5001/ClassicalMusic';\r\n          console.log('home.js utype');\r\n          console.log(this.props.utype);\r\n          if(this.props.utype == 2)\r\n          {\r\n             posturl = 'http://101.200.125.86:5001/PopMusic';\r\n          }\r\n          if(this.props.utype == 3)\r\n          {\r\n             posturl = 'http://101.200.125.86:5001/YanniMusic';\r\n          }\r\n          axios.post(posturl, payload)\r\n          .then(response => {\r\n          this.setState({ url: response.data.url});\r\n          console.log(response.data.url);\r\n          this.setState({step: this.state.step + 1});\r\n          console.log('###ABC###'); \r\n          });\r\n        }else{\r\n          alert(\"Something wrong with musicUpdate, please check!\");\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n\r\n  updateField = ({ target }) => {\r\n    const { name, value } = target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  processVA = (top, left, v, a, rate, fam) => {\r\n    //console.log(\"processVA\");\r\n    if (this.state.step === 1) {\r\n      this.setState({\r\n        initop: top,\r\n        inileft: left,\r\n        top: top,\r\n        left: left,\r\n        v: v,\r\n        a: a,\r\n      });\r\n      this.startNewExperiment(v, a);\r\n    } else {\r\n      this.setState({\r\n        top: top,\r\n        left: left,\r\n        v: v,\r\n        a: a,\r\n        rate: rate,\r\n        fam: fam,\r\n      });\r\n      //console.log(v + \" \" + a + \" \" + rate + \" \" + fam)\r\n      this.recordEachMusic(v, a, rate, fam);\r\n    }\r\n  }\r\n\r\n  selectOverallRate = (e) => {\r\n    this.setState({overallRate: e.target.value});\r\n  }\r\n\r\n  selectFavoriteSong = (e) => {\r\n    this.setState({favorite: e.target.value});\r\n  }\r\n\r\n  startTest = () => {\r\n    this.setState({step: this.state.step + 1});\r\n  }\r\n\r\n  endTest = () => {\r\n    if (this.state.overallRate > 0 && this.state.favorite > 0) {\r\n      Experiment.expEnd(parseInt(this.props.uId), parseInt(this.props.expNum), this.state.v, this.state.a, parseInt(this.state.favorite), parseInt(this.state.overallRate))\r\n      .then(response => {\r\n        //console.log(response);\r\n      })\r\n      this.props.handleLogOut();\r\n    }else {\r\n      if (this.state.overallRate < 0) {\r\n        this.setState({overallRate: 0});\r\n      }\r\n      if(this.state.favorite < 0) {\r\n        this.setState({favorite: 0});\r\n      }\r\n    }\r\n  }\r\n\r\n  audioEnd = (writingComment) => {\r\n    if (!writingComment) {\r\n      this.setState({step: this.state.step + 1, songnum: this.state.songnum + 1});\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if(this.props.loggedIn === false) {\r\n      return(\r\n        <div style={{\"textAlign\": \"center\"}}>\r\n          <h1>请先登录或者注册，谢谢！</h1>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <h3><Link to=\"/faq\">点击此处阅读实验介绍</Link></h3>\r\n          <br />\r\n          <br />\r\n          <h3><Link to=\"/login\">点击此处登录网页</Link></h3>\r\n          <br />\r\n          <br />\r\n          <h3><Link to=\"/register\">点击此处注册账号</Link></h3>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <h5><p>忘记密码或者遇到其他登录问题，请及时联系管理员TYH</p><p>微信：szxh20190131</p>\r\n        </h5>\r\n          \r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.step === 0) {\r\n      return(\r\n        <div className=\"mainPage\">\r\n        <div className=\"introclass\">\r\n          <p className='sTitle'>实验入口</p>\r\n          {this.props.expNum <= 3 &&\r\n          <p className=\"intro\">\r\n              本实验旨在测试音乐对人情绪的影响。<br/>\r\n              实验将分为<span className=\"numOfTest\">3</span> 轮进行，\r\n              {this.state.width >=600 && <br/>}\r\n              我们希望您在<span className=\"numOfTest\">1</span> 天之中完成不多于<span className=\"numOfTest\">2</span> 轮实验，{this.state.width >=600 && <br/>}\r\n              请尽量选择有不同情绪时进行试验，\r\n              并在<span className=\"numOfTest\">3</span> 天之内完成所有<span className=\"numOfTest\">3</span>轮实验。<br/>\r\n              每<span className=\"numOfTest\">1</span> 轮实验开始请您输入您当下的情绪数据（<Link to=\"/faq\">V-A模型</Link>），{this.state.width >=600 && <br/>}\r\n              之后您将听到<span className=\"numOfTest\">4</span> 段不同的音乐。<br/>\r\n              如果音乐唤起了您的部分回忆或情绪，{this.state.width >=600 && <br/>}\r\n              我们希望您能在网页提供的输入框内简洁直白地描述，<br/>\r\n              这将对我们实验中研究回忆如何影响我们对于音乐的理解有极大帮助。<br/>\r\n              在每段音乐结束之后，我们同样会使用V-A模型来采集您情绪变化的数据，{this.state.width >=600 && <br/>}\r\n              以供实验对比。<br />\r\n              该V-A值将在之后用来调整算法，不会影响本轮音乐推荐。<br/><br/>\r\n\r\n              请您在实验开始后不要离开这个页面直至结束。<br/>\r\n              如需离开，请您在返回时务必重新登录。<br/>\r\n              如果您在本轮实验开始后的3个小时内重新登录，<br/>\r\n              您将可以继续实验中未完成的部分。<br/>\r\n              如果超过3个小时，\r\n              则本轮实验的记录将清空，您需重新开始本轮实验。<br/>\r\n              <br/>\r\n              <br/>\r\n\r\n            这是您的第<span className=\"numOfTest\">{this.props.expNum}</span>轮实验</p>\r\n          }\r\n          {this.props.expNum > 3 &&\r\n            <p  className=\"intro\">您已完成所有实验，我们衷心感谢您的支持与帮助！</p>\r\n          }\r\n\r\n          <div>\r\n          {this.props.expNum <= 3 &&\r\n            <Button className=\"testButtonDisplay\" onClick={() => this.startTest()}>开始实验</Button>\r\n          }\r\n          {this.props.expNum > 3 &&\r\n            <Button className=\"testButtonDisplay\" onClick={() => this.props.handleLogOut()}>退出登录</Button>\r\n          }\r\n          </div>\r\n        </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.step === 10) {\r\n      return(\r\n        <div className=\"mainPage\">\r\n          <div className=\"introclass\">\r\n            <p className='sTitle'>恭喜您，完成本轮实验</p>\r\n            <p className='hint'>当前实验进度为 {this.props.expNum} / 3， <br /><br />请于{isNaN(this.props.endDate.getMonth()) ? this.state.newDate.getMonth() + 1 : this.props.endDate.getMonth() + 1}月{isNaN(this.props.endDate.getDate()) ? this.state.newDate.getDate() : this.props.endDate.getDate()}日之前完成剩余部分</p>\r\n            <div style={{display: \"block\"}}>\r\n              {this.state.favorite === 0 &&\r\n                <p className=\"hint\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\", color: \"#dd0000\"}}>请选择本轮您最满意的音乐：</p>\r\n              }\r\n              {this.state.favorite !== 0 &&\r\n                <p className=\"hint\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\"}}>请选择本轮您最满意的音乐：</p>\r\n              }\r\n              <select value={this.state.favorite} onChange={this.selectFavoriteSong} style={{display: \"inline\"}}>\r\n\r\n                <option value={1}> {this.state.songs[0]}</option>\r\n                <option value={2}> {this.state.songs[1]}</option>\r\n                <option value={3}> {this.state.songs[2]}</option>\r\n                <option value={4}> {this.state.songs[3]}</option>\r\n              </select>\r\n              <br />\r\n              <br />\r\n              {this.state.overallRate === 0 &&\r\n                <p className=\"hint\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\", color: \"#dd0000\"}}>请为本轮推荐的音乐做总评分：</p>\r\n              }\r\n              {this.state.overallRate !== 0 &&\r\n                <p className=\"hint\" style={{marginBottom: \"0px\", paddingBottom: \"0px\", display: \"inline\"}}>请为本轮推荐的音乐做总评分：</p>\r\n              }\r\n              <select value={this.state.overallRate} onChange={this.selectOverallRate} style={{display: \"inline\"}}>\r\n                <option value={5}> 非常满意</option>\r\n                <option value={4}> 比较满意</option>\r\n                <option value={3}> 一般般</option>\r\n                <option value={2}> 有点失望</option>\r\n                <option value={1}> 很失望</option>\r\n\r\n              </select>\r\n            </div>\r\n            <br />\r\n            <br />\r\n            <div>\r\n              <Button className=\"testButtonDisplay\" onClick={() => this.endTest()}>完成实验并退出登录</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.step === 10) {\r\n      return(\r\n        <div className=\"mainPage\">\r\n          <div className=\"inTest\">\r\n          <p className='sTitle'>恭喜您已完成本次实验听音乐的部分，<br />请完成以下问卷以结束实验：</p>\r\n          <div style={{display: \"block\", width: this.state.canvasWidth+\"px\", margin: \"auto\"}}>\r\n          {/*\r\n          <VAcanvas width={this.state.canvasWidth} endTest = {this.endTest} step={this.state.step} display=\"inherit\" top={this.state.top === -50? this.state.initop : this.state.top} left={this.state.left === -50? this.state.inileft : this.state.left}}/>\r\n          */}\r\n          </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.step === 1) {\r\n      console.log('11111111111');\r\n      console.log(this.state.step);\r\n      return(\r\n        <div className=\"mainPage\">\r\n          <div className=\"inTest\">\r\n          <p className='sTitle'>请输入您当下的情绪：</p>\r\n          <div style={{display: \"block\", width: this.state.canvasWidth+\"px\", margin: \"auto\"}}>\r\n          <VAcanvas width={this.state.canvasWidth} processVA = {this.processVA} step={this.state.step} display=\"none\"/>\r\n          </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.step !== 0 && this.state.step % 2 === 0) {\r\n      console.log('2222222222');\r\n      console.log(this.state.step);\r\n      return(\r\n        <div className=\"mainPage\">\r\n          <div className=\"inTest\">\r\n            <p className='sTitle'>请听音乐 {this.state.songnum}/ 4</p>\r\n            <div style={{display: \"block\", width: this.state.canvasWidth+\"px\", margin: \"auto\"}}>\r\n              <MP3 width={this.state.canvasWidth} audioEnd = {this.audioEnd} url={this.state.url} expNum={this.props.expNum} songNum={this.state.songnum} uId={this.props.uId}/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.step !== 0 && this.state.step % 2 === 1) {\r\n      console.log('33333333333');\r\n      console.log(this.state.step);\r\n      return(\r\n        <div className=\"mainPage\">\r\n          <div className=\"inTest\">\r\n          <p className='sTitle stsm'>请输入您当下的情绪：</p>\r\n          <p className='hint itsm'>(蓝点作为参考表示上一次输入的值)</p>\r\n          <div style={{display: \"block\", width: this.state.canvasWidth+\"px\", margin: \"auto\"}}>\r\n          <VAcanvas width={this.state.canvasWidth} processVA = {this.processVA} step={this.state.step} display=\"inherit\" top={this.state.top === -50? this.state.initop : this.state.top} left={this.state.left === -50? this.state.inileft : this.state.left}/>\r\n          </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}