{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\31505\\\\Desktop\\\\MemomusicFront1111-main\\\\src\\\\pages\\\\Login.jsx\";\nimport React, { Component } from \"react\";\nimport Idm from \"../services/Idm\";\nimport \"../css/common.css\";\nimport { Link } from 'react-router-dom';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: \"\",\n      password: \"\",\n      loggedIn: 0\n    };\n\n    this.handleSubmit = () => {\n      const {\n        handleLogIn\n      } = this.props;\n      const {\n        name,\n        password\n      } = this.state;\n      this.setState({\n        loggedIn: 1\n      }); //handleLogIn(name, \"\"); //remove later\n\n      Idm.login(name, password).then(response => {\n        //console.log(response);\n        if (response.data === \"user name does not exist!\") {\n          //console.log(\"user name does not exist!\");\n          this.setState({\n            loggedIn: -2\n          });\n        } else if (response.data === \"Incorrect Password!\") {\n          //console.log(\"Incorrect Password!\");\n          this.setState({\n            loggedIn: -1\n          });\n        } else if (response !== undefined) {\n          //console.log(response.data.start_date);\n          console.log('response.data.utype=');\n          console.log(response.data.utype);\n\n          if (response.data.music_num === 0) {\n            handleLogIn(name, response.data.u_id, response.data.exp_num + 1, response.data.music_num, response.data.utype, response.data.v, response.data.a, response.data.start_date, \"\", \"\", \"\");\n          } else {\n            handleLogIn(name, response.data.u_id, response.data.exp_num, response.data.music_num, response.data.utype, response.data.v, response.data.a, response.data.start_date, response.data.mname, response.data.mid, response.data.murl);\n          } //console.log(this.state.loggedIn);\n\n        } else {\n          alert(\"User not exist, please register!\");\n        }\n      }).catch(error => console.log(error));\n    };\n\n    this.updateField = ({\n      target\n    }) => {\n      const {\n        name,\n        value\n      } = target; //console.log(this.state);\n\n      this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  render() {\n    const {\n      name,\n      password\n    } = this.state;\n\n    if (this.props.loggedIn) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }\n      }, \"\\u60A8\\u5DF2\\u6210\\u529F\\u767B\\u5F55\"), /*#__PURE__*/React.createElement(Link, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }\n      }, \"\\u8FD4\\u56DE\\u9996\\u9875\\u5F00\\u59CB\\u5B9E\\u9A8C\"));\n    }\n\n    if (this.state.loggedIn === 1) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }\n      }, \"\\u767B\\u5F55\\u4E2D\\u3002\\u3002\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }\n      }, \"\\u8BF7\\u8010\\u5FC3\\u7B49\\u5019\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"login-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, \"\\u767B\\u5F55\"), this.state.loggedIn === -1 && /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        \"color\": \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, \"***\\u5BC6\\u7801\\u9519\\u8BEF\\uFF0C\\u8BF7\\u91CD\\u65B0\\u8F93\\u5165\"), this.state.loggedIn === -2 && /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        \"color\": \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, \"***\\u7528\\u6237\\u540D\\u4E0D\\u5B58\\u5728\\uFF0C\\u8BF7\\u6CE8\\u518C\\u6216\\u8054\\u7CFB\\u7BA1\\u7406\\u5458\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, \"\\u7528\\u6237\\u540D\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input\",\n      type: \"text\",\n      name: \"name\",\n      value: name,\n      onChange: this.updateField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, \"\\u5BC6\\u7801\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input\",\n      type: \"password\",\n      name: \"password\",\n      value: password,\n      onChange: this.updateField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      onClick: () => this.handleSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, \"\\u767B\\u5F55\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 30\n      }\n    }, \"\\u65B0\\u7528\\u6237\\uFF1F\\u8BF7\\u524D\\u5F80\\u6CE8\\u518C\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\\u6216\\u8005\\u9047\\u5230\\u5176\\u4ED6\\u767B\\u5F55\\u95EE\\u9898\\uFF0C\\u8BF7\\u53CA\\u65F6\\u8054\\u7CFB\\u7BA1\\u7406\\u5458TYH\\uFF0C\\u5FAE\\u4FE1\\uFF1Aszxh20190131\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, \"\\u5176\\u4ED6\\u95EE\\u9898\\u548C\\u5EFA\\u8BAE\\u53EF\\u4EE5\\u53D1\\u9001\\u52303150545659@qq.com\"));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/31505/Desktop/MemomusicFront1111-main/src/pages/Login.jsx"],"names":["React","Component","Idm","Link","Login","state","name","password","loggedIn","handleSubmit","handleLogIn","props","setState","login","then","response","data","undefined","console","log","utype","music_num","u_id","exp_num","v","a","start_date","mname","mid","murl","alert","catch","error","updateField","target","value","render","e","preventDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Idm from \"../services/Idm\";\r\nimport \"../css/common.css\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    name: \"\",\r\n    password: \"\",\r\n    loggedIn: 0\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    const { handleLogIn } = this.props;\r\n    const { name, password } = this.state;\r\n    this.setState({loggedIn: 1});\r\n    //handleLogIn(name, \"\"); //remove later\r\n    Idm.login(name, password)\r\n      .then(response => {\r\n        //console.log(response);\r\n        if (response.data === \"user name does not exist!\") {\r\n          //console.log(\"user name does not exist!\");\r\n          this.setState({loggedIn: -2});\r\n        }\r\n        else if (response.data === \"Incorrect Password!\") {\r\n          //console.log(\"Incorrect Password!\");\r\n          this.setState({loggedIn: -1});\r\n        }\r\n        else if (response !== undefined){\r\n          //console.log(response.data.start_date);\r\n          console.log('response.data.utype=');\r\n          console.log(response.data.utype);\r\n          if (response.data.music_num === 0) {\r\n            handleLogIn(name, response.data.u_id, response.data.exp_num + 1,  response.data.music_num,response.data.utype, response.data.v, response.data.a, response.data.start_date, \"\", \"\", \"\");\r\n          }\r\n          else{\r\n            handleLogIn(name, response.data.u_id, response.data.exp_num,  response.data.music_num, response.data.utype, response.data.v, response.data.a, response.data.start_date, response.data.mname, response.data.mid, response.data.murl);\r\n          }\r\n          \r\n          //console.log(this.state.loggedIn);\r\n        }else{\r\n          alert(\"User not exist, please register!\");\r\n        }\r\n      })\r\n      .catch(error => console.log(error));\r\n  };\r\n\r\n  updateField = ({ target }) => {\r\n    const { name, value } = target;\r\n    //console.log(this.state);\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    const { name, password } = this.state;\r\n    if (this.props.loggedIn) {\r\n      return(\r\n        <div>\r\n          <p>您已成功登录</p>\r\n          <Link to=\"/\">返回首页开始实验</Link>\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.loggedIn === 1) {\r\n      return(\r\n        <div>\r\n          <p>登录中。。。</p>\r\n          <p>请耐心等候</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        <h1  className=\"login-title\">登录</h1>\r\n        {this.state.loggedIn === -1 &&\r\n          <p  style={{\"color\": \"red\"}}>***密码错误，请重新输入</p>\r\n        }\r\n        {this.state.loggedIn === -2 &&\r\n          <p  style={{\"color\": \"red\"}}>***用户名不存在，请注册或联系管理员</p>\r\n        }\r\n        <form onSubmit={e => { e.preventDefault(); }}>\r\n          <label className=\"label\">用户名</label>\r\n          <input\r\n            className=\"input\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={this.updateField}\r\n          ></input>\r\n          <label className=\"label\">密码</label>\r\n          <input\r\n            className=\"input\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={this.updateField}\r\n          ></input>\r\n\r\n          <button className=\"button\" onClick={() => this.handleSubmit()}>登录</button>\r\n        </form>\r\n        <Link to=\"/register\"><p>新用户？请前往注册</p></Link>\r\n        <br/>\r\n        <br/>\r\n        <br/>\r\n        <br/>\r\n        <br/>\r\n        <p>忘记密码或者遇到其他登录问题，请及时联系管理员TYH，微信：szxh20190131</p>\r\n        <p>其他问题和建议可以发送到3150545659@qq.com</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}