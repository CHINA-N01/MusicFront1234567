{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\31505\\\\Desktop\\\\MemomusicFront1111-main\\\\src\\\\pages\\\\MP3.jsx\";\nimport React, { Component } from \"react\";\nimport Experiment from \"../services/Experiment.js\";\nimport \"../css/common.css\";\nimport CD from '../imgs/cd-clipart.png';\nimport { InputGroup, FormControl } from 'react-bootstrap';\nimport \"../css/va.css\";\nimport MidiPlayer from 'react-midi-player';\n\nclass MP3 extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (this.state.writingComment === false) {\n        this.setState({\n          writingComment: true\n        });\n      } //console.log(e.target.value);\n\n\n      this.setState({\n        comment: e.target.value\n      });\n    };\n\n    this.updateField = ({\n      target\n    }) => {\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.onMouseMove = e => {\n      var x = e.nativeEvent.offsetX - 8 - (e.nativeEvent.offsetX - 8) % parseInt(this.state.imgWidth / 33) + this.state.imgWidth / 33 / 2 - 4;\n      var y = e.nativeEvent.offsetY - 8 - (e.nativeEvent.offsetY - 8) % parseInt(this.state.imgHeight / 25) + this.state.imgWidth / 25 / 2 - 12;\n      this.setState({\n        x1: x,\n        y1: y\n      }); //this.setState({x1: x, y1: y });\n\n      this.setState({\n        val1x: parseInt(x / (this.state.imgWidth / 33)) - 16,\n        val1y: 12 - parseInt(y / (this.state.imgHeight / 25))\n      });\n\n      if (Math.abs(parseInt(x / (this.state.imgWidth / 33)) - 16) <= 10 && Math.abs(12 - parseInt(y / (this.state.imgHeight / 25))) <= 10) {\n        this.setState({\n          dotdisplay: \"\"\n        });\n      } else {\n        this.setState({\n          dotdisplay: \"none\"\n        });\n      }\n    };\n\n    this.nextStage = () => {\n      //console.log(\"In next stage\");\n      this.setState({\n        status: 1\n      });\n      Experiment.memory(this.props.uId, this.props.expNum, this.props.songNum, this.state.comment).then(response => {\n        //console.log(response);\n        this.props.audioEnd(false);\n      }).catch(error => {\n        console.log(error);\n        this.props.audioEnd(false);\n      });\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      imgWidth: 800,\n      writingComment: false,\n      comment: \"\",\n      status: 0\n    };\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n  }\n\n  componentDidMount() {\n    var w = this.props.width;\n    console.log('mp3.url=');\n    console.log(this.props.url);\n\n    if (w < 800) {\n      this.setState({\n        imgWidth: w\n      });\n    }\n\n    window.addEventListener('resize', this.updateWindowDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions);\n  }\n\n  updateWindowDimensions() {\n    var w = this.props.width;\n\n    if (w < 800) {\n      this.setState({\n        imgWidth: w\n      });\n    } else {\n      this.setState({\n        imgWidth: 800\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: CD,\n      width: this.state.imgWidth - 40,\n      alt: \"a black CD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }), \"console.log('url'); console.log(this.props.url);\", /*#__PURE__*/React.createElement(MidiPlayer, {\n      src: this.props.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 14\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(InputGroup, {\n      variant: \"dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Prepend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, \"\\u97F3\\u4E50\\u56DE\\u5FC6\")), /*#__PURE__*/React.createElement(FormControl, {\n      as: \"textarea\",\n      \"aria-label\": \"With textarea\",\n      onChange: this.handleChange,\n      value: this.state.comment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }), !this.state.writingComment && this.state.status === 0 && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, \"\\u2014\\u2014\\u8BF7\\u5728\\u6587\\u672C\\u6846\\u5185\\u8F93\\u5165\\u60A8\\u7684\\u97F3\\u4E50\\u56DE\\u5FC6\\u2014\\u2014\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"\\u8BF7\\u5728\\u542C\\u5B8C\\u540E\\u70B9\\u51FB\", /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => this.props.audioEnd(this.state.writingComment),\n      style: {\n        \"color\": \"blue\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 23\n      }\n    }, \"\\u6B64\\u5904\"), \"\\u8FDB\\u5165\\u4E0B\\u4E00\\u73AF\\u8282\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, \"\\u5982\\u679C\\u97F3\\u4E50\\u65E0\\u6CD5\\u6B63\\u5E38\\u52A0\\u8F7D\\uFF0C\\u60A8\\u53EF\\u4EE5\\u70B9\\u51FB\", /*#__PURE__*/React.createElement(\"a\", {\n      href: this.props.url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 32\n      }\n    }, \"\\u6B64\\u5904\"), \"\\u83B7\\u53D6\\u97F3\\u6E90\")), this.state.writingComment && this.state.status === 0 && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, \"\\u2014\\u2014\\u8BF7\\u5728\\u5B8C\\u6210\\u63CF\\u8FF0\\u540E\\u70B9\\u51FB\", /*#__PURE__*/React.createElement(\"span\", {\n      onClick: () => this.nextStage(),\n      style: {\n        \"color\": \"blue\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, \"\\u6B64\\u5904\"), \"\\u8FDB\\u5165\\u4E0B\\u4E00\\u73AF\\u8282\\u2014\\u2014\"), this.state.status === 1 && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, \"\\u2014\\u2014\\u4E0A\\u4F20\\u4E2D\\uFF0C\\u8BF7\\u8010\\u5FC3\\u7B49\\u5F85...\\u2014\\u2014\"));\n  }\n\n}\n\nexport default MP3;","map":{"version":3,"sources":["C:/Users/31505/Desktop/MemomusicFront1111-main/src/pages/MP3.jsx"],"names":["React","Component","Experiment","CD","InputGroup","FormControl","MidiPlayer","MP3","constructor","props","handleChange","e","state","writingComment","setState","comment","target","value","updateField","name","onMouseMove","x","nativeEvent","offsetX","parseInt","imgWidth","y","offsetY","imgHeight","x1","y1","val1x","val1y","Math","abs","dotdisplay","nextStage","status","memory","uId","expNum","songNum","then","response","audioEnd","catch","error","console","log","email","password","updateWindowDimensions","bind","componentDidMount","w","width","url","window","addEventListener","componentWillUnmount","removeEventListener","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Experiment from \"../services/Experiment.js\";\r\nimport \"../css/common.css\";\r\nimport CD from '../imgs/cd-clipart.png';\r\nimport {InputGroup, FormControl} from 'react-bootstrap';\r\nimport \"../css/va.css\";\r\nimport MidiPlayer from 'react-midi-player';\r\n\r\nclass MP3 extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      imgWidth: 800,\r\n      writingComment: false,\r\n      comment: \"\",\r\n      status: 0\r\n    };\r\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    var w = this.props.width;\r\n    console.log('mp3.url=');\r\n    console.log(this.props.url);\r\n    if (w < 800) {\r\n      this.setState({imgWidth: w});\r\n    }\r\n    window.addEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  updateWindowDimensions() {\r\n    var w = this.props.width;\r\n    if (w < 800) {\r\n      this.setState({imgWidth: w});\r\n    }\r\n    else{\r\n      this.setState({imgWidth: 800});\r\n    }\r\n  }\r\n\r\n  handleChange = e => {\r\n    if (this.state.writingComment === false){\r\n        this.setState({writingComment: true});\r\n    }\r\n    //console.log(e.target.value);\r\n    this.setState({ comment: e.target.value });\r\n  };\r\n\r\n  updateField = ({ target }) => {\r\n    const { name, value } = target;\r\n\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n\r\n\r\n  onMouseMove = (e) => {\r\n    var x = (e.nativeEvent.offsetX - 8) - (e.nativeEvent.offsetX - 8) % parseInt(this.state.imgWidth / 33) + this.state.imgWidth / 33 / 2 - 4;\r\n    var y = (e.nativeEvent.offsetY - 8) - (e.nativeEvent.offsetY - 8) % parseInt(this.state.imgHeight / 25) + this.state.imgWidth / 25 / 2 - 12;\r\n    this.setState({ x1: x, y1: y });\r\n    //this.setState({x1: x, y1: y });\r\n    this.setState({ val1x: parseInt(x / (this.state.imgWidth / 33)) - 16, val1y: 12 - parseInt(y / (this.state.imgHeight / 25))});\r\n    if (Math.abs(parseInt(x / (this.state.imgWidth / 33)) - 16) <= 10 && Math.abs(12 - parseInt(y / (this.state.imgHeight / 25))) <= 10) {\r\n      this.setState({ dotdisplay: \"\" });\r\n    } else {\r\n      this.setState({ dotdisplay: \"none\" });\r\n    }\r\n  }\r\n\r\n  nextStage = () => {\r\n    //console.log(\"In next stage\");\r\n    this.setState({status: 1});\r\n    Experiment.memory(this.props.uId, this.props.expNum, this.props.songNum, this.state.comment)\r\n      .then(response => {\r\n        //console.log(response);\r\n        this.props.audioEnd(false);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.props.audioEnd(false);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <img src={CD} width={this.state.imgWidth - 40} alt=\"a black CD\"/>\r\n        \r\n        <br />\r\n             console.log('url');\r\n             console.log(this.props.url);\r\n             <MidiPlayer src={this.props.url}/>\r\n        <br />\r\n        <InputGroup variant=\"dark\">\r\n          <InputGroup.Prepend>\r\n            <InputGroup.Text>音乐回忆</InputGroup.Text>\r\n          </InputGroup.Prepend>\r\n          <FormControl as=\"textarea\" aria-label=\"With textarea\" onChange={this.handleChange} value={this.state.comment}/>\r\n        </InputGroup>\r\n        <br />\r\n        {!this.state.writingComment && this.state.status === 0 &&\r\n          <div>\r\n            <p>——请在文本框内输入您的音乐回忆——</p>\r\n            <br />\r\n            <br />\r\n            <p>请在听完后点击<a onClick={()=> this.props.audioEnd(this.state.writingComment)} style={{\"color\": \"blue\"}}>此处</a>进入下一环节</p>\r\n            <p>如果音乐无法正常加载，您可以点击<a href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\">此处</a>获取音源</p>\r\n          </div>\r\n        }\r\n        {this.state.writingComment && this.state.status === 0 &&\r\n          <p>——请在完成描述后点击<span onClick={() => this.nextStage()} style={{\"color\": \"blue\"}}>此处</span>进入下一环节——</p>\r\n        }\r\n        {this.state.status === 1 &&\r\n          <p>——上传中，请耐心等待...——</p>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MP3;\r\n"]},"metadata":{},"sourceType":"module"}